legend.key.size = unit(2, 'cm'))
p <- ggplot(df_percent, aes(x = percentageFire, fill = snow_cut))
p + geom_area(bins = 10, stat = 'bin') +theme_cowplot(12) +
scale_colour_brewer(palette = 'Blues')+
xlab( 'Percent of Watershed Burned') + ylab('Number of Watersheds') +
labs(fill = 'Percent burn in snow zone') +
scale_fill_brewer( palette = 'RdYlBu')+
theme_cowplot(12) +
theme(axis.text=element_text(size=32),
axis.title=element_text(size=40,face="bold"),
plot.margin = margin(t = 80,  # Top margin
r = 80,  # Right margin
b = 80,  # Bottom margin
l = 20),
legend.text = element_text(size=18),
legend.title = element_text(size = 20),
legend.key.size = unit(2, 'cm')) +
scale_x_continuous(expand = c(0, 0), limits = c(0, 130)) +
scale_y_continuous(expand = c(0, 0), limits = c(0, 100))
p <- ggplot(df_percent, aes(x = percentageFire, fill = snow_cut))
p + geom_area(bins = 10, stat = 'bin') +theme_cowplot(12) +
scale_colour_brewer(palette = 'Blues')+
xlab( 'Percent of Watershed Burned') + ylab('Number of Watersheds') +
labs(fill = 'Percent burn in snow zone') +
scale_fill_brewer( palette = 'RdYlBu')+
theme_cowplot(12) +
theme(axis.text=element_text(size=32),
axis.title=element_text(size=40,face="bold"),
plot.margin = margin(t = 80,  # Top margin
r = 80,  # Right margin
b = 80,  # Bottom margin
l = 20),
legend.text = element_text(size=18),
legend.title = element_text(size = 20),
legend.key.size = unit(2, 'cm')) +
scale_x_continuous(expand = c(0, 0), limits = c(0, 130)) +
#scale_y_continuous(expand = c(0, 0), limits =
kjhkj
p <- ggplot(df_percent, aes(x = percentageFire, fill = snow_cut))
p + geom_area(bins = 10, stat = 'bin') +theme_cowplot(12) +
scale_colour_brewer(palette = 'Blues')+
xlab( 'Percent of Watershed Burned') + ylab('Number of Watersheds') +
labs(fill = 'Percent burn in snow zone') +
scale_fill_brewer( palette = 'RdYlBu')+
theme_cowplot(12) +
theme(axis.text=element_text(size=32),
axis.title=element_text(size=40,face="bold"),
plot.margin = margin(t = 80,  # Top margin
r = 80,  # Right margin
b = 80,  # Bottom margin
l = 20),
legend.text = element_text(size=18),
legend.title = element_text(size = 20),
legend.key.size = unit(2, 'cm')) +
scale_x_continuous(expand = c(0, 0), limits = c(0, 130))
p <- ggplot(df_percent, aes(x = percentageFire, fill = snow_cut))
p + geom_area(bins = 10, stat = 'bin') +theme_cowplot(12) +
scale_colour_brewer(palette = 'Blues')+
xlab( 'Percent of Watershed Burned') + ylab('Number of Watersheds') +
labs(fill = 'Percent burn in snow zone') +
scale_fill_brewer( palette = 'RdYlBu')+
theme_cowplot(12) +
theme(
axis.text=element_text(size=40),
axis.title=element_text(size=48,face="bold"),
plot.margin = margin(t = 20,  # Top margin
r = 80,  # Right margin
b = 80,  # Bottom margin
l = 80),
legend.text = element_text(size=28),
legend.title = element_text(size = 30),
legend.key.size = unit(2, 'cm')) +
scale_x_continuous(expand = c(0, 0), limits = c(0, 130)) +
#scale_y_continuous(expand = c(0, 0), limits = c(0,
p <- ggplot(df_percent, aes(x = percentageFire, fill = snow_cut))
p + geom_area(bins = 10, stat = 'bin') +theme_cowplot(12) +
scale_colour_brewer(palette = 'Blues')+
xlab( 'Percent of Watershed Burned') + ylab('Number of Watersheds') +
labs(fill = 'Percent burn in snow zone') +
scale_fill_brewer( palette = 'RdYlBu')+
theme_cowplot(12) +
theme(
axis.text=element_text(size=40),
axis.title=element_text(size=48,face="bold"),
plot.margin = margin(t = 20,  # Top margin
r = 80,  # Right margin
b = 80,  # Bottom margin
l = 80),
legend.text = element_text(size=28),
legend.title = element_text(size = 30),
legend.key.size = unit(2, 'cm')) +
scale_x_continuous(expand = c(0, 0), limits = c(0, 130)) +
#scale_y_continuous(expand = c(0, 0), limits = c(0,
p <- ggplot(df_percent, aes(x = percentageFire, fill = snow_cut))
p + geom_area(bins = 10, stat = 'bin') +theme_cowplot(12) +
scale_colour_brewer(palette = 'Blues')+
xlab( 'Percent of Watershed Burned') + ylab('Number of Watersheds') +
labs(fill = 'Percent burn in snow zone') +
scale_fill_brewer( palette = 'RdYlBu')+
theme_cowplot(12) +
theme(
axis.text=element_text(size=40),
axis.title=element_text(size=48,face="bold"),
plot.margin = margin(t = 20,  # Top margin
r = 80,  # Right margin
b = 80,  # Bottom margin
l = 80),
legend.text = element_text(size=28),
legend.title = element_text(size = 30),
legend.key.size = unit(2, 'cm')) +
scale_x_continuous(expand = c(0, 0), limits = c(0, 100)) +
#scale_y_continuous(expand = c(0, 0), limits = c(0, 100))
gljklh
p <- ggplot(df_percent, aes(x = percentageFire, fill = snow_cut))
p + geom_area(bins = 10, stat = 'bin') +theme_cowplot(12) +
scale_colour_brewer(palette = 'Blues')+
xlab( 'Percent of Watershed Burned') + ylab('Number of Watersheds') +
labs(fill = 'Percent burn in snow zone') +
scale_fill_brewer( palette = 'RdYlBu')+
theme_cowplot(12) +
theme(
axis.text=element_text(size=40),
axis.title=element_text(size=48,face="bold"),
plot.margin = margin(t = 20,  # Top margin
r = 80,  # Right margin
b = 80,  # Bottom margin
l = 80),
legend.text = element_text(size=28),
legend.title = element_text(size = 30),
legend.key.size = unit(2, 'cm')) +
scale_x_continuous(expand = c(0, 0), limits = c(0, 100))
names(df_raw)
e <- ggplot(df_raw %>% filter(!is.na(before_after_f)),
aes(x=factor(before_after_f, level = c('prefire', 'postfire_3yr', 'postfire')),
y=springonset_md)) +
stat_summary(
aes(color = firesnow50),
fun.data = "mean_cl_normal",
#fun = mean,  fun.min = min, fun.max = max,
geom = "pointrange",  size = 4,
position = position_dodge(0.4))
e +
#scale_fill_brewer(palette="RdYlBu") +
xlab( 'Time after fire') + ylab(expression(paste(Delta, 'Q'))) +
labs(color = 'Percent burn in snow zone\nwith 95% CI') +
scale_color_manual(labels = c("< 50% snow zone", "> 50% snow zone"),
values = c("orangered3", "steelblue3")) +
scale_x_discrete(labels = c('Pre-fire','3 years','3+ years'))+
theme_cowplot(12) +
theme(
axis.text=element_text(size=40),
axis.title=element_text(size=48,face="bold"),
plot.margin = margin(t = 20,  # Top margin
r = 80,  # Right margin
b = 80,  # Bottom margin
l = 80),
legend.text = element_text(size=28),
legend.title = element_text(size = 30),
legend.key.size = unit(2, 'cm'))
df
df
df_raw
snowzone_samples<-data.frame(length=1:0)
snowzone_samples<-data.frame(length=1:0)
for (j in 1:10) {
df<-df_raw[df_raw$snow_per >= (j* 10),]
#Add number of watersheds
snowzone_samples$samplesize[i]<-length(unique(df$GAGE_ID.f))
snowzone_samples$percent_snowzone<-j*10
}
snowzone_samples
snowzone_samples<-data.frame(length=1:10)
for (j in 1:10) {
df<-df_raw[df_raw$snow_per >= (j* 10),]
#Add number of watersheds
snowzone_samples$samplesize[i]<-length(unique(df$GAGE_ID.f))
snowzone_samples$percent_snowzone<-j*10
}
snowzone_samples
snowzone_samples<-data.frame(length=1:10)
for (j in 1:10) {
df<-df_raw[df_raw$snow_per >= (j* 10),]
#Add number of watersheds
snowzone_samples$samplesize[j]<-length(unique(df$GAGE_ID.f))
snowzone_samples$percent_snowzone[j]<-j*10
}
snowzone_samples
##point range function
df_raw$firesnow50<-as.factor(with(df_raw, ifelse( snow >= 0.5, ">50snow", "<50snow"))) #percentageFire >= 50 &
e <- ggplot(df_raw %>% filter(!is.na(before_after_f)),
aes(x=factor(before_after_f, level = c('prefire', 'postfire_3yr', 'postfire')),
y=springonset_md)) +
stat_summary(
aes(color = firesnow50),
fun.data = "mean_cl_normal",
#fun = mean,  fun.min = min, fun.max = max,
geom = "pointrange",  size = 4,
position = position_dodge(0.4))
e +
#scale_fill_brewer(palette="RdYlBu") +
xlab( 'Time after fire') + ylab(expression(paste(Delta, 'Q'))) +
labs(color = 'Percent burn in snow zone\nwith 95% CI') +
scale_color_manual(labels = c("< 50% snow zone", "> 50% snow zone"),
values = c("orangered3", "steelblue3")) +
scale_x_discrete(labels = c('Pre-fire','3 years','3+ years'))+
theme_cowplot(12) +
theme(
axis.text=element_text(size=40),
axis.title=element_text(size=48,face="bold"),
plot.margin = margin(t = 20,  # Top margin
r = 80,  # Right margin
b = 80,  # Bottom margin
l = 80),
legend.text = element_text(size=28),
legend.title = element_text(size = 30),
legend.key.size = unit(2, 'cm'))
e <- ggplot(df_raw %>% filter(!is.na(before_after_f)),
aes(x=factor(before_after_f, level = c('prefire', 'postfire_3yr', 'postfire')),
y=annual_tot)) +
stat_summary(
aes(color = firesnow50),
fun.data = "mean_cl_normal",
#fun = mean,  fun.min = min, fun.max = max,
geom = "pointrange",  size = 4,
position = position_dodge(0.4))
e +
#scale_fill_brewer(palette="RdYlBu") +
xlab( 'Time after fire') + ylab(expression(paste(Delta, 'Q'))) +
labs(color = 'Percent burn in snow zone\nwith 95% CI') +
scale_color_manual(labels = c("< 50% snow zone", "> 50% snow zone"),
values = c("orangered3", "steelblue3")) +
scale_x_discrete(labels = c('Pre-fire','3 years','3+ years'))+
theme_cowplot(12) +
theme(
axis.text=element_text(size=40),
axis.title=element_text(size=48,face="bold"),
plot.margin = margin(t = 20,  # Top margin
r = 80,  # Right margin
b = 80,  # Bottom margin
l = 80),
legend.text = element_text(size=28),
legend.title = element_text(size = 30),
legend.key.size = unit(2, 'cm'))
##point range function
df_raw$firesnow50<-as.factor(with(df_raw, ifelse( percentageFire >= 20 & snow >= 0.5, ">50snow", "<50snow"))) #percentageFire >= 50 &
e <- ggplot(df_raw %>% filter(!is.na(before_after_f)),
aes(x=factor(before_after_f, level = c('prefire', 'postfire_3yr', 'postfire')),
y=annual_tot)) +
stat_summary(
aes(color = firesnow50),
fun.data = "mean_cl_normal",
#fun = mean,  fun.min = min, fun.max = max,
geom = "pointrange",  size = 4,
position = position_dodge(0.4))
e +
#scale_fill_brewer(palette="RdYlBu") +
xlab( 'Time after fire') + ylab(expression(paste(Delta, 'Q'))) +
labs(color = 'Percent burn in snow zone\nwith 95% CI') +
scale_color_manual(labels = c("< 50% snow zone", "> 50% snow zone"),
values = c("orangered3", "steelblue3")) +
scale_x_discrete(labels = c('Pre-fire','3 years','3+ years'))+
theme_cowplot(12) +
theme(
axis.text=element_text(size=40),
axis.title=element_text(size=48,face="bold"),
plot.margin = margin(t = 20,  # Top margin
r = 80,  # Right margin
b = 80,  # Bottom margin
l = 80),
legend.text = element_text(size=28),
legend.title = element_text(size = 30),
legend.key.size = unit(2, 'cm'))
##point range function
df_raw$firesnow50<-as.factor(with(df_raw, ifelse(snow >= 0.5, ">50snow", "<50snow"))) #percentageFire >= 50 &
e <- ggplot(df_raw %>% filter(!is.na(before_after_f)),
aes(x=factor(before_after_f, level = c('prefire', 'postfire_3yr', 'postfire')),
y=annual_tot)) +
stat_summary(
aes(color = firesnow50),
fun.data = "mean_cl_normal",
#fun = mean,  fun.min = min, fun.max = max,
geom = "pointrange",  size = 4,
position = position_dodge(0.4))
e +
#scale_fill_brewer(palette="RdYlBu") +
xlab( 'Time after fire') + ylab(expression(paste(Delta, 'Q'))) +
labs(color = 'Percent burn in snow zone\nwith 95% CI') +
scale_color_manual(labels = c("< 50% snow zone", "> 50% snow zone"),
values = c("orangered3", "steelblue3")) +
scale_x_discrete(labels = c('Pre-fire','3 years','3+ years'))+
theme_cowplot(12) +
theme(
axis.text=element_text(size=40),
axis.title=element_text(size=48,face="bold"),
plot.margin = margin(t = 20,  # Top margin
r = 80,  # Right margin
b = 80,  # Bottom margin
l = 80),
legend.text = element_text(size=28),
legend.title = element_text(size = 30),
legend.key.size = unit(2, 'cm'))
names(df_raw)
e <- ggplot(df_raw %>% filter(!is.na(before_after_f)),
aes(x=factor(before_after_f, level = c('prefire', 'postfire_3yr', 'postfire')),
y=meanslope)) +
stat_summary(
aes(color = firesnow50),
fun.data = "mean_cl_normal",
#fun = mean,  fun.min = min, fun.max = max,
geom = "pointrange",  size = 4,
position = position_dodge(0.4))
e +
#scale_fill_brewer(palette="RdYlBu") +
xlab( 'Time after fire') + ylab(expression(paste(Delta, 'Q'))) +
labs(color = 'Percent burn in snow zone\nwith 95% CI') +
scale_color_manual(labels = c("< 50% snow zone", "> 50% snow zone"),
values = c("orangered3", "steelblue3")) +
scale_x_discrete(labels = c('Pre-fire','3 years','3+ years'))+
theme_cowplot(12) +
theme(
axis.text=element_text(size=40),
axis.title=element_text(size=48,face="bold"),
plot.margin = margin(t = 20,  # Top margin
r = 80,  # Right margin
b = 80,  # Bottom margin
l = 80),
legend.text = element_text(size=28),
legend.title = element_text(size = 30),
legend.key.size = unit(2, 'cm'))
names(df_raw)
e <- ggplot(df_raw %>% filter(!is.na(before_after_f)),
aes(x=factor(before_after_f, level = c('prefire', 'postfire_3yr', 'postfire')),
y=baseflow)) +
stat_summary(
aes(color = firesnow50),
fun.data = "mean_cl_normal",
#fun = mean,  fun.min = min, fun.max = max,
geom = "pointrange",  size = 4,
position = position_dodge(0.4))
e +
#scale_fill_brewer(palette="RdYlBu") +
xlab( 'Time after fire') + ylab(expression(paste(Delta, 'Q'))) +
labs(color = 'Percent burn in snow zone\nwith 95% CI') +
scale_color_manual(labels = c("< 50% snow zone", "> 50% snow zone"),
values = c("orangered3", "steelblue3")) +
scale_x_discrete(labels = c('Pre-fire','3 years','3+ years'))+
theme_cowplot(12) +
theme(
axis.text=element_text(size=40),
axis.title=element_text(size=48,face="bold"),
plot.margin = margin(t = 20,  # Top margin
r = 80,  # Right margin
b = 80,  # Bottom margin
l = 80),
legend.text = element_text(size=28),
legend.title = element_text(size = 30),
legend.key.size = unit(2, 'cm'))
names(df_raw)
e <- ggplot(df_raw %>% filter(!is.na(before_after_f)),
aes(x=factor(before_after_f, level = c('prefire', 'postfire_3yr', 'postfire')),
y=meanslope_ma)) +
stat_summary(
aes(color = firesnow50),
fun.data = "mean_cl_normal",
#fun = mean,  fun.min = min, fun.max = max,
geom = "pointrange",  size = 4,
position = position_dodge(0.4))
e +
#scale_fill_brewer(palette="RdYlBu") +
xlab( 'Time after fire') + ylab(expression(paste(Delta, 'Q'))) +
labs(color = 'Percent burn in snow zone\nwith 95% CI') +
scale_color_manual(labels = c("< 50% snow zone", "> 50% snow zone"),
values = c("orangered3", "steelblue3")) +
scale_x_discrete(labels = c('Pre-fire','3 years','3+ years'))+
theme_cowplot(12) +
theme(
axis.text=element_text(size=40),
axis.title=element_text(size=48,face="bold"),
plot.margin = margin(t = 20,  # Top margin
r = 80,  # Right margin
b = 80,  # Bottom margin
l = 80),
legend.text = element_text(size=28),
legend.title = element_text(size = 30),
legend.key.size = unit(2, 'cm'))
names(df_raw)
e <- ggplot(df_raw %>% filter(!is.na(before_after_f)),
aes(x=factor(before_after_f, level = c('prefire', 'postfire_3yr', 'postfire')),
y=springonset_md)) +
stat_summary(
aes(color = firesnow50),
fun.data = "mean_cl_normal",
#fun = mean,  fun.min = min, fun.max = max,
geom = "pointrange",  size = 4,
position = position_dodge(0.4))
e +
#scale_fill_brewer(palette="RdYlBu") +
xlab( 'Time after fire') + ylab(expression(paste(Delta, 'Q'))) +
labs(color = 'Percent burn in snow zone\nwith 95% CI') +
scale_color_manual(labels = c("< 50% snow zone", "> 50% snow zone"),
values = c("orangered3", "steelblue3")) +
scale_x_discrete(labels = c('Pre-fire','3 years','3+ years'))+
theme_cowplot(12) +
theme(
axis.text=element_text(size=40),
axis.title=element_text(size=48,face="bold"),
plot.margin = margin(t = 20,  # Top margin
r = 80,  # Right margin
b = 80,  # Bottom margin
l = 80),
legend.text = element_text(size=28),
legend.title = element_text(size = 30),
legend.key.size = unit(2, 'cm'))
e <- ggplot(df_raw %>% filter(!is.na(before_after_f)),
aes(x=factor(before_after_f, level = c('prefire', 'postfire_3yr', 'postfire')),
y=springonset_md)) +
stat_summary(
aes(color = firesnow50),
fun.data = "mean_cl_normal",
#fun = mean,  fun.min = min, fun.max = max,
geom = "pointrange",  size = 4,
position = position_dodge(0.4))
e +
#scale_fill_brewer(palette="RdYlBu") +
xlab( 'Time after fire') + ylab(expression(paste(Delta, 'Q'))) +
labs(color = 'Percent burn in snow zone\nwith 95% CI') +
scale_color_manual(labels = c("< 50% snow zone area", "> 50% snow zone area"),
values = c("orangered3", "steelblue3")) +
scale_x_discrete(labels = c('Pre-fire','3 years','3+ years'))+
theme_cowplot(12) +
theme(
axis.text=element_text(size=40),
axis.title=element_text(size=48,face="bold"),
plot.margin = margin(t = 20,  # Top margin
r = 80,  # Right margin
b = 80,  # Bottom margin
l = 80),
legend.text = element_text(size=28),
legend.title = element_text(size = 30),
legend.key.size = unit(2, 'cm'))
pointfun<-function(y,title){
e <- ggplot(df_raw %>% filter(!is.na(before_after_f)),
aes(x=factor(before_after_f, level = c('prefire', 'postfire_3yr', 'postfire')),
y=springonset_md)) +
stat_summary(
aes(color = firesnow50),
fun.data = "mean_cl_normal",
#fun = mean,  fun.min = min, fun.max = max,
geom = "pointrange",  size = 4,
position = position_dodge(0.4))
e +
#scale_fill_brewer(palette="RdYlBu") +
xlab( 'Time after fire') + ylab('Spring melt date') +
labs(color = 'Percent burn in snow zone\nwith 95% CI') +
scale_color_manual(labels = c("< 50% snow zone area", "> 50% snow zone area"),
values = c("orangered3", "steelblue3")) +
scale_x_discrete(labels = c('Pre-fire','3 years','3+ years'))+
theme_cowplot(12) +
theme(
axis.text=element_text(size=40),
axis.title=element_text(size=48,face="bold"),
plot.margin = margin(t = 20,  # Top margin
r = 80,  # Right margin
b = 80,  # Bottom margin
l = 80),
legend.text = element_text(size=28),
legend.title = element_text(size = 30),
legend.key.size = unit(2, 'cm'))
lkjlk
kjlkjk
[[p'/']]
e <- ggplot(df_raw %>% filter(!is.na(before_after_f)),
aes(x=factor(before_after_f, level = c('prefire', 'postfire_3yr', 'postfire')),
y=springonset_md)) +
stat_summary(
aes(color = firesnow50),
fun.data = "mean_cl_normal",
#fun = mean,  fun.min = min, fun.max = max,
geom = "pointrange",  size = 4,
position = position_dodge(0.4))
e +
#scale_fill_brewer(palette="RdYlBu") +
xlab( 'Time after fire') + ylab('Spring melt date') +
labs(color = 'Percent burn in snow zone\nwith 95% CI') +
scale_color_manual(labels = c("< 50% snow zone area", "> 50% snow zone area"),
values = c("orangered3", "steelblue3")) +
scale_x_discrete(labels = c('Pre-fire','3 years','3+ years'))+
theme_cowplot(12) +
theme(
axis.text=element_text(size=40),
axis.title=element_text(size=48,face="bold"),
plot.margin = margin(t = 20,  # Top margin
r = 80,  # Right margin
b = 80,  # Bottom margin
l = 80),
legend.text = element_text(size=28),
legend.title = element_text(size = 30),
legend.key.size = unit(2, 'cm'))
###DONE WITH CLEANING DATA
###SAVE streamflow_metrics table as a more specific name!####
#Example:
write.csv(streamflow_metrics_prepost,'streamflow_metrics.csv')
streamflow_metrics<-read.csv('~/Desktop/EcoForecasting/streamflow_metrics.csv')
###DONE WITH CLEANING DATA
###SAVE streamflow_metrics table as a more specific name!####
#Example:
write.csv(streamflow_metrics_prepost,'~/Desktop/EcoForecasting/streamflow_metrics.csv')
###DONE WITH CLEANING DATA
###SAVE streamflow_metrics table as a more specific name!####
#Example:
streamflow_metrics_df<-rbindlist(streamflow_metrics_prepost)
write.csv(streamflow_metrics_df,'~/Desktop/EcoForecasting/streamflow_metrics.csv')
